この要件定義とシステム設計は、Java Spring Boot を使用した「フィットネス成長記録アプリ」の開発プロジェクトを円滑に進めるためのものです。🏋️‍♂️

## 要件定義 (Requirement Definition)

ユーザーが自身のフィットネス活動と成長を記録・管理するためのアプリです。

### 必須機能

* **ユーザー管理**:
    * ユーザー登録、ログイン、ログアウト機能。
    * プロフィール編集（名前、体重、身長、目標など）。
* **トレーニング記録**:
    * 日付ごとにトレーニング内容（種目、回数、セット数、重量など）を記録・閲覧・編集・削除する機能。
    * トレーニングメニューのテンプレート作成機能。
* **身体測定記録**:
    * 体重、体脂肪率、筋肉量などの身体データを記録・閲覧・編集・削除する機能。
* **進捗管理**:
    * トレーニング記録や身体測定記録をグラフで可視化する機能。

### 非機能要件

* **パフォーマンス**: 大量のデータが保存されても、レスポンスが遅延しないこと。
* **セキュリティ**: ユーザー認証、データの暗号化、SQLインジェクション対策を講じること。
* **スケーラビリティ**: 将来的にユーザー数が増加しても対応できる設計であること。

---

## システム設計 (System Design)

### 技術スタック

* **言語**: Java 21
* **フレームワーク**: Spring Boot 3.5.4
* **ビルドツール**: Maven
* **データベース**: PostgreSQL
* **永続化**: Spring Data JPA, Hibernate
* **セキュリティ**: Spring Security
* **フロントエンド**: Thymeleaf (またはREST API + 任意のJSフレームワーク)
* **テスト**: JUnit 5, Mockito

### データモデル (簡易版)

* `User` テーブル: `user_id` (PK), `username`, `email`, `password` (暗号化), `height`, `goal` など
* `Profile` テーブル: `profile_id` (PK), `user_id` (FK), `weight`, `body_fat`, `muscle_mass` など
* `Workout` テーブル: `workout_id` (PK), `user_id` (FK), `date`, `exercise_name`, `sets`, `reps`, `weight` など
* `Template` テーブル: `template_id` (PK), `user_id` (FK), `template_name`, `exercises` など

### 全体アーキテクチャ

* **レイヤードアーキテクチャ**:
    * **Presentation Layer (プレゼンテーション層)**: Spring MVC (Controller)。HTTPリクエストを処理し、レスポンスを返す。
    * **Service Layer (サービス層)**: ビジネスロジックを実装。ControllerとRepositoryの間に位置する。
    * **Data Access Layer (データアクセス層)**: Spring Data JPA (Repository)。データベースとのやり取りを担う。

---

## 開発フェーズ (Development Phases)

開発を以下の4つのフェーズに分けて進めます。

### フェーズ1: プロジェクトの初期設定とユーザー管理機能 💻

* **タスク**:
    * Mavenプロジェクトの作成 (`claude-coach-01`) と基本設定。
    * Spring Bootの初期設定（`application.properties` など）。
    * データベース接続設定 (PostgreSQL)。
    * `User` エンティティ、リポジトリ、サービス、コントローラーの作成。
    * ユーザー登録、ログイン、ログアウト機能の実装。
    * Spring Securityの導入。
* **成果物**: ユーザー認証が可能な最低限のWebアプリケーション。

### フェーズ2: トレーニング記録機能 📝

* **タスク**:
    * `Workout` エンティティ、リポジトリ、サービス、コントローラーの作成。
    * トレーニング記録の追加、閲覧、編集、削除機能の実装。
    * ユーザーごとにトレーニング記録が管理されるようにロジックを実装。
    * 簡単なトレーニングメニューのテンプレート機能の実装。
* **成果物**: トレーニング内容を記録・管理できる機能。

### フェーズ3: 身体測定記録とデータ可視化機能 📈

* **タスク**:
    * `Profile` エンティティ、リポジトリ、サービス、コントローラーの作成。
    * 体重、体脂肪率などの身体測定データを記録・管理する機能の実装。
    * データベースからデータを取得し、グラフで表示するロジックを実装。
    * グラフ表示のためのライブラリ選定（例: Chart.js）と統合。
* **成果物**: 身体データを記録し、進捗をグラフで確認できる機能。

### フェーズ4: アプリケーションの品質向上とデプロイ準備 ✨

* **タスク**:
    * 単体テスト、結合テストの作成と実施。
    * セキュリティ対策の最終確認。
    * エラーハンドリングの改善。
    * デプロイメントのための設定（`Dockerfile` など）。
    * READMEファイルの作成。
* **成果物**: 安定した動作とセキュリティを備えたアプリケーション、デプロイ準備完了。